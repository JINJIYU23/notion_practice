<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/src/styles/style.css" />
    <link rel="stylesheet" href="/src/styles/reset.css" />
    <script src="https://kit.fontawesome.com/cd31889dca.js" crossorigin="anonymous"></script>
    <script src="/src/components/api.js"></script>
    <script type="module" src="/src/components/documentService.js"></script>
    <script src="/src/components/Editor.js"></script>
    <script src="/src/components/AutoSave.js"></script>
    <script src="/src/components/DocumentDelete.js"></script>
    <script src="/src/components/Router.js"></script>
    <script src="/src/components/main.js"></script>
    <script src="/src/components/DocumentDelete.js"></script>

    <title>Document</title>
  </head>
  <body>
    <main>
      <!-- 메인 화면 -->
      <section id="main_screen">
        <!-- 사이드바 -->
        <section id="sidebar" class="open">
          <input type="checkbox" id="menuicon" />
          <label for="menuicon">
            <span></span>
            <span></span>
          </label>
          <div class="sidebar">
            <!-- 개인 페이지 영역 -->
            <button class="add_new_page">새 페이지 추가</button>
            <div id="my_pages">
              <ul id="page_list">
                <!-- 예시 -->
                <!-- 부모페이지1 -->
                <li>
                  <div>
                    <a href="#">부모페이지1</a>
                    <div class="btns">
                      <button class="add_btn"><i class="fa-regular fa-square-plus"></i></button>
                      <button class="delete_btn"><i class="fa-regular fa-trash-can"></i></button>
                    </div>
                  </div>
                  <ul class="children">
                    <li>
                      <a href="#">자식 페이지 1-1</a>
                      <div class="btns">
                        <button class="add_btn">
                          <i class="fa-regular fa-square-plus"></i>
                        </button>
                        <button class="delete_btn">
                          <i class="fa-regular fa-trash-can"></i>
                        </button>
                      </div>
                    </li>
                    <li>
                      <a href="#">자식 페이지 1-2</a>
                      <div class="btns">
                        <button class="add_btn">
                          <i class="fa-regular fa-square-plus"></i>
                        </button>
                        <button class="delete_btn">
                          <i class="fa-regular fa-trash-can"></i>
                        </button>
                      </div>
                    </li>
                  </ul>
                </li>
                <!-- 부모페이지2 -->
                <li>
                  <div>
                    <a href="#">부모페이지2</a>
                    <div class="btns">
                      <button class="add_btn"><i class="fa-regular fa-square-plus"></i></button>
                      <button class="delete_btn"><i class="fa-regular fa-trash-can"></i></button>
                    </div>
                  </div>
                  <ul class="children">
                    <li>
                      <a href="#">자식 페이지 2-1</a>
                      <div class="btns">
                        <button class="add_btn">
                          <i class="fa-regular fa-square-plus"></i>
                        </button>
                        <button class="delete_btn">
                          <i class="fa-regular fa-trash-can"></i>
                        </button>
                      </div>
                    </li>
                  </ul>
                </li>
                <!-- 부모페이지3 -->
                <li>
                  <div>
                    <a href="#">부모페이지3</a>
                    <div class="btns">
                      <button class="add_btn"><i class="fa-regular fa-square-plus"></i></button>
                      <button class="delete_btn"><i class="fa-regular fa-trash-can"></i></button>
                    </div>
                  </div>
                  <ul class="children">
                    <li>
                      <a href="#">자식 페이지 3-1</a>
                      <div class="btns">
                        <button class="add_btn">
                          <i class="fa-regular fa-square-plus"></i>
                        </button>
                        <button class="delete_btn">
                          <i class="fa-regular fa-trash-can"></i>
                        </button>
                      </div>
                    </li>
                    <li>
                      <a href="#">자식 페이지 3-2</a>
                      <div class="btns">
                        <button class="add_btn">
                          <i class="fa-regular fa-square-plus"></i>
                        </button>
                        <button class="delete_btn">
                          <i class="fa-regular fa-trash-can"></i>
                        </button>
                      </div>
                    </li>
                  </ul>
                </li>
                <li>
                  <div>
                    <a href="#">부모페이지4</a>
                    <div class="btns">
                      <button class="add_btn"><i class="fa-regular fa-square-plus"></i></button>
                      <button class="delete_btn"><i class="fa-regular fa-trash-can"></i></button>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>
        <!-- 페이지 편집창 -->
        <section id="editor">
          <input type="text" id="page_title" placeholder="새 페이지" />
          <textarea id="page_contents" placeholder="내용을 입력하세요"></textarea>
        </section>
        <!-- 시계 -->
        <section id="datetime-display">
          <script>
            function updateTime() {
              const now = new Date();
              const timeString = now.toLocaleTimeString();
              const dateTimeElement = document.getElementById("datetime-display");
              if (dateTimeElement) {
                dateTimeElement.textContent = timeString;
              }
            }

            updateTime();
            setInterval(updateTime, 1000);
          </script>
        </section>
        <!-- 달력 -->
        <section id="calendar-wrapper">
          <div id="calendar-header">
            <button id="prev-month">◀</button>
            <span id="calendar-title"></span>
            <button id="next-month">▶</button>
          </div>
          <div id="calendar"></div>
        </section>
        <script>
          let currentDate = new Date();

          function generateCalendar(date) {
            const calendar = document.getElementById("calendar");
            const title = document.getElementById("calendar-title");
            const year = date.getFullYear();
            const month = date.getMonth();

            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();

            const today = new Date();
            const isThisMonth = today.getFullYear() === year && today.getMonth() === month;

            const dayNames = ["일", "월", "화", "수", "목", "금", "토"];
            calendar.innerHTML = "";
            title.textContent = `${year}년 ${month + 1}월`;

            // 요일 헤더 생성
            dayNames.forEach((day, index) => {
              const dayElem = document.createElement("div");
              dayElem.textContent = day;
              dayElem.style.fontWeight = "bold";
              if (index === 0) dayElem.style.color = "red"; // 일요일
              if (index === 6) dayElem.style.color = "blue"; // 토요일
              calendar.appendChild(dayElem);
            });

            // 앞쪽 빈칸 (1일 시작 전)
            for (let i = 0; i < firstDay; i++) {
              calendar.appendChild(document.createElement("div"));
            }

            // 날짜 출력
            for (let d = 1; d <= lastDate; d++) {
              const dateElem = document.createElement("div");
              dateElem.textContent = d;

              const dayOfWeek = (firstDay + d - 1) % 7;
              if (dayOfWeek === 0) {
                dateElem.classList.add("sunday"); // 일요일
              } else if (dayOfWeek === 6) {
                dateElem.classList.add("saturday"); // 토요일
              }

              if (isThisMonth && d === today.getDate()) {
                dateElem.classList.add("today"); // 오늘
              }

              calendar.appendChild(dateElem);
            }
          }

          document.getElementById("prev-month").addEventListener("click", () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar(currentDate);
          });

          document.getElementById("next-month").addEventListener("click", () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar(currentDate);
          });

          generateCalendar(currentDate);
        </script>
      </section>
    </main>
  </body>
</html>
